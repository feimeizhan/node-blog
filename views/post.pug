extends layout
block append link
	link(href="/lib/quill/quill.snow.css", rel="stylesheet")
block append script
	script(src="/lib/quill/quill.js", type="text/javascript")
block page
	- var menu = 'post'
block content
	h2 Post an article
	if error
		#info-alert.alert.alert-warning(role="alert")= error
	.col-md-8
		form#article-form(action="/articles/post", method="POST", role="form")
			.form-group
				label(for="title") Title
				input#title.form-control(name="title", type="text", placeholder="Javascript is good")
			.form-group
				label(for="slug") Slug
				input#slug.form-control(name="slug", type="text", placeholder="js-good")
				span.help-block This string will be used in the URL.
			.form-group
				label(for="text") Text
				input(name="text", type="hidden")
				#editor
					p Javascript is the best program language of the world.
			p
				button.btn.btn-primary(type="submit") Save

	script.
		var quill = new Quill('#editor', {
			theme: 'snow',
			placeholder: 'Compose an epic...',
			modules: {
				toolbar: [
					['bold', 'italic'],
					['link', 'blockquote', 'code-block', 'image'],
					[{ list: 'ordered' }, { list: 'bullet' }]
				]
			}
		});

		var form = document.querySelector('#article-form');
		form.onsubmit = function(){
			alert('test');
			var textInput = document.querySelector('input[name=text]');
			var text = JSON.stringify(quill.getContents());
			textInput.value = text;
			return true;
		};
